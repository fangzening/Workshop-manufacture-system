{% include 'manufacturing/include/header.html' %}
{% load static %}
{% include 'manufacturing/include/sidebar.html' %}
{% include 'manufacturing/include/error-modal-style.html' %}
{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/maskconfig/style.css' %}">
<link rel="stylesheet" href="{% static 'css/styles.css' %}">
<link rel="stylesheet" href="{% static 'css/git/styles.css' %}">
{% if user.is_authenticated %}
<section id="main-content" class="login-wrap">
  <section class="wrapper">
        <div class="row">
          <div class="col-lg-12">
                <ol class="breadcrumb">
                    <li><i class="fa fa-home"></i><a href="{% url 'manufacturing:home' %}">Dashboard</a></li>
                    <!--<li><i class="fa fa-laptop"></i><a href="{% url 'manufacturing:sub_toolbox' %}">Assembly Management</a></li>-->
                    <li><i class="fa fa-th-list"></i> Git Table</li>
                </ol>
          </div>
        </div>

       <div class="row">
          <div class="col-sm-12">
            <section class="panel">
                      <div class="whole whole-table">
                            <div class="main-content">
                                <div class="nav-user-search  clearfix header-search-box">
                                  <div class="nav top-menu top-button" style="width : 100%">
                                    <div class="tool-bar">
                                      <div class="search-bar">
                                        <form class="form-flex-search" method="get">
                                          <input class="form-item form-control search-control input" placeholder=" PO..." type="text" name="po" id="po" >
                                          <button class="form-item btn btn-info" type="submit">Search</button>
                                        </form>
                                      </div>

                                      <div class="upload-bar">
                                        <form class="form-flex-upload" action=""method="post" enctype="multipart/form-data">
                                          {% csrf_token %}
                                          <input type="file" class="input form-item" name="file" id="file">
                                          <button class="btn btn-info form-item" type="submit">Upload</button>
                                        </form>
                                      </div>
                                   </div>
                                  </div>
                               </div>
                            </div>
                          <div id="maxheight">
                              {% if git_list %}
                              <table class="table table-striped table-condensed table-hover table-git" id="git-table">
                                    <tbody>
                                      <tr class="table-header">
                                        <th>PO</th>
                                        <th>Current Qty</th>
                                        <th>Target Qty</th>
                                        <th>ETD</th>
                                        <th>ETA</th>
                                        <th>Tracking NO</th>
                                        <th>Company</th>
                                        <th>Update</th>
                                        <th><i class="icon_cogs"></i>&nbsp; Git</th>
                                        <th><i class="icon_cogs"></i>&nbsp; Config</th>
                                      </tr>
                                     {% for git in page_obj %}
                                      <tr>
                                          <th class="adjust-height" > <p>{{git.po_no}}</p></th>
                                          <th class="adjust-height" > <p>{{git.current_qty}}</p></th>
                                          <th class="adjust-height" > <p>{{git.target_qty}}</p></th>
                                          <th class="adjust-height"><input id="{{git.po_no}}_etd" class="date-width input-field" type="date" name="etd" value="{% if git.etd != '' %}{{ git.etd }}{% endif %}"></th>
                                          <th class="adjust-height"><input id="{{git.po_no}}_eta" class="date-width input-field" type="date" name="eta" value="{% if git.eta != '' %}{{ git.eta }}{% endif %}"></th>
                                          <th class="adjust-height"> <input class="input-field" id="{{git.po_no}}_tracking_no" value="{% if git.tracking_no == None %} N/A {% else %} {{git.tracking_no}} {% endif %}"></input></th>
                                          <th class="adjust-height"> <input class="input-field" id="{{git.po_no}}_tracking_company" value="{% if git.tracking_company == None %} N/A {% else %} {{git.tracking_company}} {% endif %}"></input></th>
                                          <th>
                                            <div>
                                              {% csrf_token %}
                                                <button onclick="updateGit(event)" id="{{git.po_no}}" data-url="{% url 'git:git-upload' %}"  style="background: none; border: none;" class="icon-text-mask icon-text  btn-confirm simple-confirm" >
                                                <img  src="{% static 'svg/submit-id.svg' %}" alt="icon"><span>Update</span></button>
                                            </div>
                                          </th>
                                          <th>
                                            <form  action="{% url 'git:download-excel' %}" class="uploader"method="post" enctype="multipart/form-data">
                                            {% csrf_token %}
                                            <label for="downloading" >
                                              <input type="hidden" value="{{ git.po_no }}" name="po_no">
                                            <button class="btn btn-info button-git" type="submit" name="git" value="git" style="">Download</button>
                                            </label>
                                            </form>
                                            </th>
                                            <th>
                                            <form  action="{% url 'git:download-excel' %}" class="uploader"method="post" enctype="multipart/form-data">
                                              {% csrf_token %}
                                              <label for="downloading" >
                                              <input type="hidden" value="{{ git.po_no }}" name="po_no" id="downloading">
                                              <button class="btn btn-info button-git" type="submit" name="config" value="config" style="">Download</button>
                                              </label>
                                          </form>
                                          </th>
                                      </tr>
                                    {% endfor %}
                                  </tbody>
                              </table>
                            </div>
                            <!-- {% include 'manufacturing/include/pagination.html' %} -->
                            <ul class="page-button pagination pagination-lg">
                              <li class="page-links">
                                  {% if page_obj.has_previous %}
                                      <a href="?page=1">&laquo; first</a>
                                      <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                                  {% endif %}
                                  <span class="current">
                                      Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                                  </span>
                                  {% if page_obj.has_next %}
                                      <a href="?page={{ page_obj.next_page_number }}">next</a>
                                      <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                                  {% endif %}
                              </li>
                          </ul>
                         </div>
                         {% else %}
                              <div id="myModal" class="modal-log">
                                 <div class="modal-content"  style="width: 40%;">
                                     <span class="close" data-dismiss="modal" style="z-index: 100;">Ã—</span>
                                      <div class="warning-modal-body">
                                         <p>No related data</p>
                                       </div>
                                   </div>
                                <button style="display: none;" id="myBtn">Open Modal</button>
                             </div>
                         {% endif %}
                </section>
            </div>
       </div>
  </section>
</section>
{% include 'manufacturing/include/javascript-sidebar.html' %}
<script src="{% static 'js/line/warning-modal.js' %}"></script>
<script src="{% static 'js/git/scripts.js' %}"></script>
{% endif%}
{% endblock %}
</body>
</html>
