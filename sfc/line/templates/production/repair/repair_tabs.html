{% include 'manufacturing/include/error-modal-style.html' %}
<div class="col-sm-12" style="padding: 0;">
    <section class="panel">
         <div class="panel-body" style="height: 350px; overflow-y: scroll; padding: 0;">
                <div class="tab tabs">
                     <button class="tablinks active" onclick="openForm(event, 'WOInfo')" id="defaultOpen">Detail</button>
                     {% for repairmain in serialnumber.repairmain_set.all %}
                     {% if repairmain.result == 0 %}
                     {% if forloop.last %}
                     <button class="tablinks active" onclick="openForm(event, 'RepairHistory')">Repair History</button>
                     {% endif %} {% endif %} {% endfor %}
                     <button class="tablinks" onclick="openForm(event, 'FailureHistory')">Failure History</button>
                     <button class="tablinks" onclick="openForm(event, 'FailureDescription')">Failure_Description</button>
                     <button class="tablinks" onclick="openForm(event, 'Components')">Key Parts/Components</button>
                </div>
                <div id="WOInfo" class="tabcontent repair-tab-content">
                 <div class="form-horizontal">
                    <div class="col-md-12">
                        <table class="table table-striped table-bordered table-sm">
                            <p></p>
                            <tbody>
                                 <tr class="table-header">
                                       <th>Detail:</th>
                                       <th style="border: none;"></th>
                                       <th style="border: none;"></th>
                                       <th style="border: none;"></th>
                                       <th style="border: none;"></th>
                                       <th style="border: none;"></th>
                                  </tr>
                                  <tr>
                                 {% if serialnumber_list %}
                                 {% for serialnumber in serialnumber_list %}
                                 {% for repairmain in serialnumber.repairmain_set.all %}
                                 {% if forloop.last %}
                                      <th scope="row">Result:</th>
                                     <td> {{ repairmain.result}}</td>
                                     {% endif %}{% endfor %}{% endfor %}{% endif %}
                                     <th scope="row">Work Order:</th>
                                     <td>{{ serialnumber.workorder_id }}</td>
                                     <th scope="row">SKU:</th>
                                     <td>{{ serialnumber.model_id }}</td>
                                 </tr>
                            </tbody>
                        </table>
                    </div>
                 </div>
               </div>
               <div id="RepairHistory" class="tabcontent repair-tab-content">
                 <div class="form-horizontal">
                    <div class="col-md-12">
                       {% if serialnumber_list %}
                        <table class="table table-striped table-bordered table-sm">
                            <p></p>
                            <tbody>
                             <tr class="table-header">
                               <th>Repaired History:</th>
                               <th style="border: none;"></th>
                               <th style="border: none;"></th>
                               <th style="border: none;"></th>
                               <th style="border: none;"></th>
                               <th style="border: none;"></th>
                               <th style="border: none;"></th>
                               <th style="border: none;"></th>
                            </tr>
                             {% for serialnumber in serialnumber_list %}
                             {% for repairmain in serialnumber.repairmain_set.all %}
                             {% for repairdetail in repairmain.repairdetail_set.all %}
                             <tr>
                                <th scope="row">Serial Number:</th>
                                <td>{{repairdetail.failure_sequence.serial_number  }}</td>
                                <th scope="row">Repaired Code:</th>
                                <td>{{ repairdetail.repaired_code  }}</td>
                                <th scope="row">Description:</th>
                                <td>{{ repairdetail.repaired_description  }}</td>
                                <th scope="row">Date:</th>
                                <td>{{ repairdetail.repaired_date }}</td>
                            </tr>
                           {% endfor %}{% endfor %}
                            {% endfor %}{% endif %}
                            </tbody>
                        </table>
                    </div>
                 </div>
               </div>
                <div id="FailureHistory" class="tabcontent repair-tab-content">
                     <div class="form-horizontal">
                            <div class="col-md-12">
                                <table class="table table-striped table-bordered table-sm">
                                    <p></p>
                                    <tbody>
                                         <tr class="table-header">
                                           <th>Failure Code</th>
                                           <th style="border: none;"></th>
                                           <th style="border: none;"></th>
                                           <th style="border: none;"></th>
                                           <th style="border: none;"></th>
                                           <th style="border: none;"></th>
                                        </tr>
                                          {% for repairmain in serialnumber.repairmain_set.all %}
                                        <tr>
                                            <th scope="row">Group ID:</th>
                                            <td>{{ repairmain.failure_code.group_id }}</td>
                                            <th scope="row">Code Description:</th>
                                            <td>{{ repairmain.failure_code.description}}</td>
                                             <th scope="row">Date:</th>
                                            <td>{{ repairmain.create_date }}</td>
                                        </tr>
                                         {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                     </div>
                </div>
                 <div id="FailureDescription" class="tabcontent repair-tab-content">
                     <div class="form-horizontal">
                            <div class="col-md-12">
                                <table class="table table-striped table-bordered table-sm">
                                    <p></p>
                                     <tbody>
                                      {% if serialnumber_list %}
                                      {% for serialnumber in serialnumber_list %}
                                        <tr class="table-header">
                                           <th>Failure Description (  <strong>{{ serialnumber.pk }} </strong>)</th>
                                           <th style="border: none;"></th>
                                        </tr>
                                       {% for repairmain in serialnumber.repairmain_set.all %}
                                       {% if forloop.last %}
                                         <tr>
                                            <th scope="row">Description:</th>
                                            <td>{{ repairmain.failure_description }}</td>
                                        </tr>
                                       {% endif %}
                                       {% endfor %}
                                       {% empty %}
                                           <div id="myModal" class="modal-keypart">
                                                 <div class="modal-content"  style="width: 40%;">
                                                     <span class="close" data-dismiss="modal" style="z-index: 100;">×</span>
                                                      <div class="warning-modal-body">
                                                         <p>No related data</p>
                                                       </div>
                                                   </div>
                                                <button style="display: none;" id="myBtn">Open Modal</button>
                                             </div>
                                      {% endfor %}
                                      {% endif %}
                                    </tbody>
                                </table>
                            </div>
                     </div>
                 </div>
                 <div id="Components" class="tabcontent repair-tab-content">
                     <div class="form-horizontal">
                            <div class="col-md-12">
                                <table class="table table-striped table-bordered table-sm">
                                  <p></p>
                                     <tbody>
                                       <tr class="table-header">
                                           <th>Key Parts/Components</th>
                                           <th style="border: none;"></th>
                                           <th style="border: none;"></th>
                                           <th style="border: none;"></th>
                                        </tr>
                                       {% if serialnumber_list %}
                                       {% for serialnumber in serialnumber_list %}
                                       {% for keypart in serialnumber.keypart_set.all %}
                                       <tr>
                                            <th scope="row">Part No:</th>
                                            <td>{{ keypart.model_id }}</td>
                                            <th scope="row">Component Serial Number:</th>
                                            <td> {{ keypart.cserialnumber }}</td>
                                        </tr>
                                        {% empty %}
                                           <div id="myModal" class="modal-keypart">
                                                 <div class="modal-content"  style="width: 40%;">
                                                     <span class="close" data-dismiss="modal" style="z-index: 100;">×</span>
                                                      <div class="warning-modal-body">
                                                         <p>No related data</p>
                                                       </div>
                                                   </div>
                                                <button style="display: none;" id="myBtn">Open Modal</button>
                                             </div>
                                     {% endfor %}{% endfor %}
                                     {% endif %}
                                    </tbody>
                                </table>
                            </div>
                     </div>
                 </div>
         </div>
    </section>
</div>
{% load static %}
<script src="{% static 'js/line/warning-modal.js' %}"></script>
<script src="{% static 'js/manufacturing/tab.js' %}"></script>