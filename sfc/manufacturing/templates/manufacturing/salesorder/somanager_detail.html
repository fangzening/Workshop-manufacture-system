{% include 'manufacturing/include/header.html' %}
{% include 'manufacturing/include/sidebar.html' %}
{% include 'manufacturing/include/error-modal-style.html' %}
<style>th,td{border: 1px solid #dddddd;}</style>
<section id="main-content" class="login-wrap">
    <section class="wrapper">
        <div class="row">
            <div class="col-lg-12">
                <ol class="breadcrumb">
                    <li><i class="fa fa-home"></i><a href="{% url 'manufacturing:home' %}">Dashboard</a></li>
                    <!--<li><i class="icon_genius"></i><a href="{% url 'manufacturing:sub_shipping_manager' %}">Shipping Management</a></li>-->
                     <li><i class="fa fa-th-list"></i><a href="{% url 'shipping:salesorder_list' %}">SalesOrder Manager</a></li>
                     <li><i class="fa fa-th-list"></i> SalesOrder Detail <strong>{{ salesorder.salesorder_id }}</strong></li>
                </ol>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12" style="padding: 0;">
                <section class="panel">
                     <div class="panel-body" style="height: 357px; overflow-y: scroll; padding: 0;">
                            <div class="tab tabs">
                                 <button class="tablinks active" onclick="openForm(event, 'PalletInfo')" id="defaultOpen">SalesOrder Detail <strong>{{ salesorder.salesorder_id }}</strong></button>
                                 <button class="tablinks" onclick="openForm(event, 'DeliveryNumberDetail')">Delivery Number Detail</button>
                            </div>
                            <!--   SO detail  -->
                          {% if salseorder_list %}
                             {% if salesorder.salesorder_id  %}
                               <div id="PalletInfo" class="tabcontent tabcontent-manager pallet-tab-content">
                                 <div class="form-horizontal">
                                    <div class="col-md-12 mobile-tab-table">
                                         <table class="table table-striped table-bordered table-sm  panel-body table-pallet" id="salesoorder_detail_tab"  style="margin:0; padding: 0;">
                                             <thead>
                                              <tr class="table-header">
                                                   <th>SKU</th>
                                                   <th>Line</th>
                                                   <th>Request Qty</th>
                                                   <th>Ship Qty</th>
                                                   <th>Customer PO</th>
                                                   <th>Updater</th>
                                               </tr>
                                             </thead>
                                             <tbody>

                                                 {% for salesorderdetail  in salesorder.salesorderdetail_set.all %}
                                               <tr>
                                                  <td>{{ salesorderdetail.skuno }}</td>
                                                  <td>{{ salesorderdetail.salesorder_item }}</td>
                                                  <td>{{ salesorderdetail.salesorder_qty }}</td>
                                                  <td>{{ salesorderdetail.ship_qty }}</td>
                                                  <td>{{ salesorderdetail.customer_po }}</td>
                                                   <td>{{ salesorderdetail.updater }}</td>
                                               </tr>
                                               {% empty %}
                                               <div id="myModal" class="modal-keypart"></div>
                                               {% endfor %}
                                               {% endif %}{% endif %}
                                             </tbody>
                                        </table>
                                          <div id="messageSKU" class="modal-keypart" style="display: none;">
                                             <div class="modal-content"  style="width: 40%;">
                                                  <div class="warning-modal-body">
                                                     <p>No matched sku.</p>
                                                   </div>
                                               </div>
                                            <button style="display: none;" id="myBtn">Open Modal</button>
                                         </div>
                                   </div>
                                 </div>
                               </div>
                               <!--   DN detail  -->
                               <div id="DeliveryNumberDetail" class="tabcontent tabcontent-manager pallet-tab-content" style="padding-top: 10px;">
                                 <div class="form-horizontal">
                                    <div class="col-md-12 mobile-tab-table">
                                       {% if salseorder_list %}
                                        <table class="table table-striped table-bordered table-sm  panel-body table-pallet" style="margin:0; padding: 0;" >
                                             <tbody>
                                               <p></p>
                                               <tr class="table-header">
                                                  <th>DN</th>
                                                  <th>QTY</th>
                                                  <th>SKU</th>
                                                  <th>Line</th>
                                                  <th>Pallet</th>
                                               </tr>

                                                     {% if salesorder.salesorder_id %}
                                                     {% for deliverynumberdetail  in salesorder.deliverynumberdetail_set.all %}
                                               <tr>
                                                   <th> <p>{{ deliverynumberdetail.deliverynumber_id.deliverynumber_id }}</p></th>
                                                   <th> <p>{{ deliverynumberdetail.current_qty }}</p></th>
                                                   <th><p>{{deliverynumberdetail.skuno}}</p></th>
                                                  {% for salesorderdetail  in salesorder.salesorderdetail_set.all %}
                                                  {% if forloop.last %}
                                                   <th><p>{{salesorderdetail.salesorder_item}}</p> </th>
                                                  {% endif %}
                                                  {% endfor %}
                                                  {% for deliverynumber  in salesorder.deliverynumber_set.all %}
                                                  {% ifequal deliverynumber.deliverynumber_id deliverynumberdetail.deliverynumber_id.deliverynumber_id %}
                                                  {% for palletdeliverynumber  in deliverynumber.palletdeliverynumber_set.all %}
                                                  <th><p>{{ palletdeliverynumber.pallet_id }}</p> </th>
                                                  {% endfor %} {% endifequal %}  {% endfor %}
                                               </tr>
                                                  {% empty %}
                                             </tbody>
                                        </table>
                                                    <div id="myModal" class="modal-keypart">
                                                         <div class="modal-content">
                                                             <span class="close" data-dismiss="modal" style="z-index: 100;">×</span>
                                                              <div class="warning-modal-body">
                                                                 <p>No related data.</p>
                                                               </div>
                                                           </div>
                                                        <button style="display: none;" id="myBtn">Open Modal</button>
                                                    </div>
                                                 {% endfor %}

                                        {% endif %}
                                        {% else %}
                                             <div id="myModal" class="modal-keypart">
                                                 <div class="modal-content">
                                                     <span class="close" data-dismiss="modal" style="z-index: 100;">×</span>
                                                      <div class="warning-modal-body">
                                                         <p>No related data.</p>
                                                       </div>
                                                   </div>
                                                <button style="display: none;" id="myBtn">Open Modal</button>
                                             </div>
                                        {% endif %}
                                    </div>
                                 </div>
                               </div>
                         <div id="bottomSection" style="float: right;"></div>
                     </div>
                </section>
            </div>
        </div>
    </section>
</section>
<!-- load js -->
{% load static %}
  <!-- javascripts -->
<script src="{% static 'js/line/warning-modal.js' %}"></script>
{% include 'manufacturing/include/javascript-sidebar.html' %}
<script src="{% static 'js/manufacturing/tab.js' %}"></script>

</body>
</html>
