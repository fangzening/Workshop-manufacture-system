{% include 'manufacturing/include/header-update.html' %}
{% load static %}
<link href="{% static 'css/permission/style.css' %}" rel="stylesheet">
<link href="{% static 'css/dist/jquery.tree-multiselect.min.css' %}" rel="stylesheet">
<script src="{% static 'js/vendor/jquery-1.11.3.min.js' %}"></script>
<script src="{% static 'js/vendor/jquery-ui.min.js' %}"></script>
<script src="{% static 'js/manufacturing/jquery.tree-multiselect.js' %}"></script>
 {% include 'manufacturing/include/sidebar.html' %}
<section id="main-content">
   <section class="wrapper">
        <div class="">
            <div class="row">
              <div class="col-lg-12">
                <ol class="breadcrumb">
               <li><i class="fa fa-home"></i><a href="{% url 'manufacturing:home' %}">Dashboard</a></li>
               <li><i class="fa fa-laptop"></i>Admin</li>
                <li><i class="icon_profile"></i><a href="{% url 'manufacturing:signup_sidebar' %}">User Manager</a></li>
              <li><i class="fa fa-file-text-o"></i><span class="path-breadcrumb">{{ user.username }}</span> Info Update</li>


            </ol>
          </div>
        </div>

       <div class="row">
          <div class="col-lg-12">
            <section class="panel">
                    <div class="panel-body" style="padding: 0; transition: 1s;">
                            <div class="tab tabs">
                                {% if perms.manufacturing.can_user_view_user_list %}
                                <button class="tablinks"> <a href="{% url 'manufacturing:user_list' %}">User List</a></button>
                                {% endif %}
                                 {% comment %}{% if perms.manufacturing.can_add_user %}
                                <button class="tablinks"><a href="{% url 'manufacturing:signup_sidebar' %}">Add User</a></button>
                                {% endif %}{% endcomment %}
                                 <button class="tablinks">
                                     <a href="{% url 'manufacturing:user-update' user.id  %}">
                                         Edit <em>{{ user.username }}</em>'s Profile</a></button>
                                 {% if perms.manufacturing.can_add_permission %}
                                <button class="tablinks active-id" id="defaultOpen" onclick="openForm(event, 'UserInfoUpdate')"><em>{{ user.username }}</em>'s Permissions</button>
                                {% endif %}
                                 {% comment %}{% if perms.manufacturing.can_add_profile %}
                                <button class="tablinks"><a href="{% url 'manufacturing:users_add_profiles' %}">Add Profile</a></button>
                                {% endif %}{% endcomment%}
                            </div>
                             <div  class="tabcontent"  id="UserInfoUpdate" style="display: block;">
                                <div style="width: 80%; margin: 0 auto;">
                                     <div class="login-wrap form-horizontal">
                                          <div style="width: 90%; margin: 0 auto;">
                                      <div class="form-group col-lg-12">
                                         <label class="col-sm-12 control-label">
                                                <p style="float: left;">Select a different user</p>
                                        </label>
                                       <div class="col-lg-6">
                                          <select  id="menu" class="form-control">
                                              <option value="#">-------</option>
                                              {% if user_list %}
                                                 {% for user in user_list %}
                                                 <option value="{% url 'manufacturing:add-permissions' pk=user.id  %}">{{ user.username }}</option>
                                               {% endfor %}
                                               {% endif %}
                                                <script>
                                              function gotosite() {
                                              window.location = document.getElementById("menu").value; // JQuery:  $("#menu").val();
                                            }
                                                </script>
                                        </select>
                                       </div>
                                       <div class="col-lg-6">
                                                 <button id="go" class="btn btn-primary" style="margin: 0 2rem; width: 40%;" onclick="gotosite()">Go</button>
                                       </div>
                                      </div>
                                      <form method="post" class="form-horizontal">
                                             {% csrf_token %}
                                             {{ form.non_field_errors }}
                                             {{ form.source.errors }}
                                              {{ form.source }}
                                              {{ form.error }}

                                    <!--   ##### username #######-->
                                      <div class="form-group" >
                                         <div class="col-lg-12">
                                               <div style="margin-top: 2rem;">
                                                    <label class="control-label col-sm-12">
                                                    <p style="float: left;">UserName</p>
                                                    </label>
                                               </div>
                                               <div class="col-sm-12">

                                                    <input class="form-control" type="hidden" name="username" value="{{ user.username }}">
                                                   <h1 style="float: left;"><em>{{ user.username }}</em></h1>

                                               </div>
                                         </div>
                                      </div>
                                           <!--   ##### permission #######-->
                                            {% if perms.is_superuser %}
                                          <div class="form-group">
                                           <div class="col-sm-4 form-group section-border is-input" id="is-input">

                                                   <div class="col-sm-12 icon-text">
                                                       <label class="">
                                                         <p style="float: left;">Regular User</p>
                                                       </label>
                                                       <div class="col-sm-12 ">
                                                       {{ form.is_active }}
                                                       </div>
                                                        <br>
                                                        <span id="input-desc" class="small-p">Designates whether this user should be treated as active. Unselect this instead of deleting accounts.</span>
            <!--                                            <input class="permission-input" type="checkbox" name="is_active" id="id_is_active" checked="">-->
                                                   </div>

                                             </div>
                                             <div class="col-sm-4  form-group is-input section-border" id="is-input-1">
                                                    <div class="col-sm-12 icon-text">
                                                       <label class="">
                                                           <p style="float: left;">Site Administrator</p></label>
                                                        <div class="col-sm-12">
                                                         {{ form.is_staff }}
                                                        </div>
                                                        <br>
                                                         <span id="input-desc-1" class="small-p">Designates whether the user can log into this admin site.</span>
                                                    </div>
                                             </div>
                                             <div class="col-sm-4  form-group is-input section-border" id="is-input-2">
                                                      <div class="col-sm-12 icon-text">
                                                       <label class="">
                                                           <p style="float: left;">System Administrator</p></label>
                                                           <div class="col-sm-12">
                                                          {{ form.is_superuser }}
                                                           </div>
                                                          <br>
                                                          <span id="input-desc-2" class="small-p">Designates that this user has all permissions without explicitly assigning them.</span>
                                                      </div>
                                             </div>
                                          </div>
                                          {% endif %}
                                           <div class="form-group tree-multiselect">
                                               <label class="col-sm-2 control-label"><h4>Groups:</h4></label>
                                                  <div class="col-sm-12">
                                                       {{ form.groups}}
                                                  </div>
                                           </div>
                                             <div class="form-group tree-multiselect">
                                               <label class="col-sm-2 control-label"><h4>Permissions:</h4></label>
                                                  <div class="col-sm-12">
                                                       {{ form.user_permissions }}
                                                  </div>
                                            </div>
                                            <script src="{% static 'js/user/group.js' %}"></script>
                                           <div class="form-group section-border">
                                              <button class="btn btn-primary" style="margin-bottom: 1rem;" type="submit">Update</button>
                                           </div>
                                      </form>
                                     </div>
                                   </div>
                                </div>
                             </div>
<!--         ###############################  end form ###################################-->
            </div></section></div></div></div>
      </section>
    </section>
{% include 'manufacturing/include/javascript-for-permission.html' %}
</body>
</html>
