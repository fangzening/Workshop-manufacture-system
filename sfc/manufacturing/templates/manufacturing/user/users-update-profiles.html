 {% include 'manufacturing/include/header.html' %}
    {% load static %}
 {% include 'manufacturing/include/sidebar.html' %}
  <section id="main-content">
      <section class="wrapper">
          <div>

                <div class="row">
                  <div class="col-lg-12">
                    <ol class="breadcrumb">
                      <li><i class="fa fa-home"></i><a href="{% url 'manufacturing:home' %}">Home</a></li>
                      <li><i class="fa fa-laptop"></i>Admin</li>
                      <li><i class="icon_profile"></i><a class="" href="{% url 'manufacturing:user_list' %}">User List</a></li>
                      <li><i class="fa fa-square-o"></i>Edit User Profile</li>
                    </ol>
                  </div>
                </div>

                   <div class="row">
                      <div class="col-lg-12">
                        <section class="panel">
                            <div class="panel-body" style="padding: 0;">
                                    <div class="tab tabs">
                                        <button class="tablinks"> <a href="{% url 'manufacturing:user_list' %}">User List</a></button>
                                         {% if perms.manufacturing.can_add_permission %}
                                         {% endif %}
                                        <button class="active-id tablinks" onclick="openForm(event, 'ModifyUserProfile')"  id="defaultOpen">Edit <em>{{ profile.user.username }}</em>'s Profile</button>
                                         {% if perms.manufacturing.can_add_permission %}
                                        <button class="tablinks get-button">
                                            <a href="http://10.20.193.58/manufacturing/management/user-add-permissions/{{ user.id }}/?csrfmiddlewaretoken=nJnJjVJZYZ0UtTEAZCqLJHDqz6ucLarNFXUIyZb3JfbTegKm1nCnEzsBv0FV1wYe">
                                                <em>{{ profile.user.username }}</em>'s Permissions</a>
                                        </button>
                                        {% endif %}
                                    </div>
                                   <div  class="tabcontent form-horizontal"  id="ModifyUserProfile" style="padding: 3rem;">
                                      <div style="width: 80%; margin: 0 auto;">
                                        <div>
                                             <div class="form-group col-lg-12 section-border">
                                                 <div class="col-lg-12">
                                                       <label class="col-sm-12 control-label">
                                                        <p style="float: left;">UserName:</p>
                                                      </label>
                                                 </div>
                                                 <div class="col-sm-12">
                                                    <div class="col-lg-6">
                                                    <h1><em>{{ profile.user }}</em></h1>
                                                    </div>
                                                 </div>
                                             </div>

                                             <div class="form-group col-lg-12 section-border">
                                                  <div class="col-lg-12">
                                                  <label class="control-label col-sm-12">
                                                  <p style="float: left;">Email:</p>
                                                  </label>
                                                 </div>
                                                  <div class="col-sm-12">
                                                     <div class="col-lg-6">
                                                         <p>{{ user.email }}</p>
                                                     </div>
                                                  </div>
                                             </div>

                                          <div class="form-group col-lg-12 section-border">
                                             <div class="col-lg-6">
                                                 <div>
                                                      <label class=" control-label col-sm-12">
                                                      <p style="float: left;">First Name:</p>
                                                      </label>
                                                 </div>
                                                 <div class="col-sm-12">
                                                     <p>{{ user.first_name }}</p>
                                                 </div>
                                             </div>

                                             <div class="col-lg-6 ">
                                                 <div>
                                                      <label class="control-label col-sm-12">
                                                      <p style="float: left;">Last rName:</p>
                                                      </label>
                                                 </div>
                                                 <div class="col-sm-12">
                                                       <p style="float: left;">{{ user.last_name }}</p>
                                                 </div>
                                             </div>
                                       </div>
                                        <div class="form-group col-lg-12">
                                            <a class="btn btn-info btn-block" style="width: 150px; float: right; margin-bottom: 1rem;" href="{% url 'manufacturing:user-update' profile.user.id  %}">
                                              Edit Info
                                            </a>
                                          </div>
                                        </div>
                                           {% if form.errors %}
                                             {% for field in form %}
                                               {% for error in field.errors %}
                                                <div id="myModal" class="modal">
                                                     <div class="modal-content"  style="width: 40%;">
                                                         <span class="close" data-dismiss="modal" style="z-index: 100;">Ã—</span>
                                                          <div class="warning-modal-body">
                                                            <p>{{ error|escape }}</p>
                                                          </div>
                                                     </div>
                                                      <button style="display: none;" id="myBtn">Open Modal</button>
                                                     </div>
                                                        {% endfor %}
                                                     {% endfor %}
                                                    {% endif %}
                                                         <div class="form-group col-lg-12">
                                                             <div class="col-lg-12">
                                                              <div class="profile-h2" style="margin-top: 0;"><h2 style="margin-bottom: 0;">Permission Group/Role</h2></div>
                                                                 <br>
                                                                 <div>
                                                                      <label class="control-label col-sm-12">
                                                                      <p style="float: left;">Role:</p>
                                                                      </label>
                                                                 </div>
                                                             <div class="col-sm-12">
                                                                  {{ user.groups.all.0 }}
                                                             </div>
                                                         </div>
                                                     </div>
                                                 <form method="POST" id="" class="form-horizontal half-form" action= "{% url 'manufacturing:users_profiles_update' profile.id %}">
                                                            <div style="margin: 0 auto;">
                                                                {% csrf_token %}
                                                                     {{ form.non_field_errors }}
                                                                     {{ form.source.errors }}
                                                                      {{ form.source }}
                                                                             <div class="form-group border-section" style="border-bottom: 0;">
                                                                                 <div class="col-lg-6">
                                                                                    <div class="profile-h2" style="margin-top: 0;"><h2 style="margin-bottom: 0;">Information</h2></div>
                                                                                     <br>
                                                                                    <div class="col-lg-12">
                                                                                      <label class="col-sm-12 control-label">
                                                                                      <p style="float: left;">Department:</p>
                                                                                      </label>

                                                                                     <div class="col-sm-12">
                                                                                        <input type="text" class="form-control" name="department" maxlength="100" required id="id_department" value="{{ profile.department}}">
                                                                                     </div>
                                                                                </div>
                                                                              </div>
                                                                                <!--   time stamp  -->
                                                                               <div class="col-lg-6">
                                                                                    <div class="profile-h2" style="margin-top: 0;"><h2 style="margin-bottom: 0;">Time stamp</h2></div>
                                                                                     <br>
                                                                                     <div class="">
                                                                                         <label class="col-sm-12 control-label"><p style="float: left; height: 35px;">Last Login:</p></label>
                                                                                         <div class="col-sm-12">
                                                                                             {{ user.last_login }}</div>
                                                                                     </div>
                                                                                     <div class="">
                                                                                         <label class="col-sm-12 control-label"><p style="float: left; height: 35px;">Date Join:</p></label>
                                                                                          <div class="col-sm-12">
                                                                                         {{ user.date_joined }}</div>
                                                                                     </div>
                                                                                </div>
                                                                         </div>
                                                              <div class="form-group col-lg-12">
                                                                  <button class="btn btn-primary btn-block" style="float:right; width: 150px; margin-bottom: 1rem;" type="submit">Save Profile</button>
                                                              </div>
                                                        </div>
                                                  </form>
                                            </div>
                                      </div>

                             </div>
                    </section>
                </div>
            </div>
        </div>
      </section>
  </section>
 {% include 'manufacturing/include/javascript-sidebar.html' %}
 <script src="{% static 'js/manufacturing/tab.js' %}"></script>
 </body>
</html>
